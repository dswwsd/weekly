(this.webpackJsonpweekly=this.webpackJsonpweekly||[]).push([[0],{183:function(e,t,n){},475:function(e,t,n){"use strict";n.r(t);var o=n(2),a=n(172),r=n.n(a),i=(n(183),n(173)),s=n(174),l=n(74),c=n(178),u=n(177),d=n(109),m=n.n(d),p=n(175),h=n.n(p),g=n(176),y=n.n(g),f=n(8);function b(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)e[n]&&t.push(e[n]);return t}function v(e){return/^(https?):\/\/((?:[a-z0-9.-]|%[0-9A-F]{2}){3,})(?::(\d+))?((?:\/(?:[a-z0-9-._~!$&'()*+,;=:@]|%[0-9A-F]{2})*)*)(?:\?((?:[a-z0-9-._~!$&'()*+,;=:\/?@]|%[0-9A-F]{2})*))?(?:#((?:[a-z0-9-._~!$&'()*+,;=:\/?@]|%[0-9A-F]{2})*))?$/i.test(e)}var w=new y.a,j={type:"object",required:[],properties:{summary:{type:"array",title:"\u6982\u8ff0",items:{type:"string"}},thoughts:{type:"array",title:"\u672c\u5468\u611f\u60f3",items:{type:"string"}},tasks:{type:"array",title:"\u9879\u76ee\u8be6\u60c5",items:{type:"object",required:["title"],properties:{title:{type:"string",title:"\u6807\u9898"},wiki:{type:"string",title:"\u9879\u76ee\u6587\u6863",format:"uri"},prd:{type:"string",title:"\u4ea7\u54c1\u6587\u6863",format:"uri"},releaseDate:{type:"string",title:"\u8ba1\u5212\u4e0a\u7ebf\u65e5\u671f",format:"date"},status:{title:"\u9879\u76ee\u72b6\u6001",type:"string",enum:["\u5f00\u53d1\u4e2d","\u5f00\u53d1\u5b8c\u6210\uff0c\u5f85\u8054\u8c03","\u8054\u8c03\u4e2d","\u5df2\u63d0\u6d4b","\u6d4b\u8bd5\u4e2d","\u5df2\u4e0a\u7ebf"],default:"\u5f00\u53d1\u4e2d",uniqueItems:!0},progress:{title:"\u9879\u76ee\u8fdb\u5ea6\uff08%\uff09",type:"integer",minimum:0,maximum:100,multipleOf:10,default:0},background:{type:"array",title:"\u9879\u76ee\u80cc\u666f",items:{type:"string"}},target:{type:"array",title:"\u9879\u76ee\u76ee\u6807",items:{type:"string"}},details:{type:"array",title:"\u672c\u5468\u5de5\u4f5c\u5185\u5bb9",items:{type:"string"}},problems:{type:"array",title:"\u95ee\u9898\u4e0e\u98ce\u9669",items:{type:"string"}}}}},other:{type:"array",title:"\u5176\u4ed6",items:{type:"string"}},plans:{type:"array",title:"\u4e0b\u5468\u8ba1\u5212",items:{type:"string"}}}},k={summary:{items:{"ui:placeholder":"\u6982\u8ff0"}},thoughts:{items:{"ui:placeholder":"\u611f\u60f3"}},plans:{items:{"ui:placeholder":"\u4e0b\u5468\u8ba1\u5212"}},other:{items:{"ui:placeholder":"\u5176\u4ed6"}},tasks:{items:{title:{"ui:placeholder":"\u9879\u76ee\u6807\u9898"},background:{items:{"ui:placeholder":"\u9879\u76ee\u80cc\u666f"}},target:{items:{"ui:placeholder":"\u9879\u76ee\u76ee\u6807"}},details:{items:{"ui:placeholder":"\u672c\u5468\u5de5\u4f5c\u5185\u5bb9"}},problems:{items:{"ui:placeholder":"\u95ee\u9898\u4e0e\u98ce\u9669"}},progress:{"ui:widget":"range","ui:options":{inline:!0}}}}},x=null,O=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).onUnload=o.onUnload.bind(Object(l.a)(o)),o.state={formData:{summary:[],thoughts:[],tasks:[],other:[],plans:[]}},o}return Object(s.a)(n,[{key:"render",value:function(){var e=this;return Object(f.jsxs)("div",{className:"App col-md-12",children:[Object(f.jsx)("div",{className:"col-md-5 form-section",children:Object(f.jsx)(m.a,{schema:j,uiSchema:k,noValidate:!0,formData:this.state.formData,onChange:function(t){var n=t.formData;e.setState({formData:n}),x.setValue(e.mdConvert(n))},onSubmit:function(e){return!1},children:Object(f.jsx)("button",{type:"submit",style:{display:"none"},children:"\u66f4\u65b0"})})}),Object(f.jsxs)("div",{className:"col-md-7 fix-content",children:[Object(f.jsxs)("div",{className:"col-md-5 textarea-section",children:[Object(f.jsx)("legend",{children:"Markdown\u6e90\u7801"}),Object(f.jsx)("textarea",{})]}),Object(f.jsxs)("div",{className:"col-md-7 preview-section",children:[Object(f.jsx)("button",{className:"col-md-3 btn btn-info btn-sm",onClick:this.copyMD,children:Object(f.jsx)("span",{style:{fontSize:"normal"},children:"\u590d\u5236md"})}),Object(f.jsx)("button",{id:"cpBtn",className:"col-md-3 btn btn-info btn-sm",onClick:this.copyContent,children:Object(f.jsx)("span",{style:{fontSize:"normal"},children:"\u590d\u5236html"})}),Object(f.jsx)("iframe",{id:"preview",frameBorder:"0",title:"\u9884\u89c8"})]})]})]})}},{key:"mdConvert",value:function(e){var t=[];if(!e)return"";e.summary&&t.push({h3:"\u6982\u8ff0"},{ul:b(e.summary)}),e.thoughts&&t.push({h3:"\u611f\u60f3"},{ul:b(e.thoughts)});var n=[];return e.tasks&&(e.tasks.map((function(e){return n.push({h4:"".concat(e.title||"\u9879\u76ee\u6807\u9898"," `").concat(e.status,"`")},{ul:b(["\u9879\u76ee\u6587\u6863: <".concat(v(e.wiki)?e.wiki:"\u65e0",">"),"\u4ea7\u54c1\u6587\u6863: <".concat(v(e.prd)?e.prd:"\u65e0",">"),"".concat(e.releaseDate?"\u8ba1\u5212\u4e0a\u7ebf\u65e5\u671f: "+e.releaseDate:""),"".concat(e.progress?"\u9879\u76ee\u6574\u4f53\u8fdb\u5ea6: "+e.progress+"%":""),"".concat(e.background&&e.background.length?"\u9879\u76ee\u80cc\u666f:":""),{ul:b(e.background)},"".concat(e.target&&e.target.length?"\u9879\u76ee\u76ee\u6807:":""),{ul:b(e.target)},"".concat(e.details&&e.details.length?"\u672c\u5468\u5de5\u4f5c:":""),{ol:b(e.details)},"".concat(e.problems&&e.problems.length?"\u95ee\u9898\u4e0e\u98ce\u9669:":""),{ul:b(e.problems)}])}),!1})),t.push({h3:"\u9879\u76ee\u8be6\u60c5"}),t.push(n)),e.other&&e.other.length&&t.push({h3:"\u5176\u4ed6\u95ee\u9898"},{ul:b(e.other)}),e.plans&&e.plans.length&&t.push({h3:"\u4e0b\u5468\u8ba1\u5212"},{ul:b(e.plans)}),h()(t)}},{key:"updatePreview",value:function(){document.getElementById("preview").contentWindow.document.body.innerHTML=w.render(x.getValue())}},{key:"copyMD",value:function(){!function(e){var t=document.createElement("textarea");t.style.position="fixed",t.style.top=0,t.style.left=0,t.style.width="2em",t.style.height="2em",t.style.padding=0,t.style.border="none",t.style.outline="none",t.style.boxShadow="none",t.style.background="transparent",t.value=e,document.body.appendChild(t),t.select();try{var n=document.execCommand("copy")?"successful":"unsuccessful";console.log("Copying text command was "+n)}catch(o){console.log("Oops, unable to copy")}document.body.removeChild(t)}(x.getValue())}},{key:"copyContent",value:function(){var e=document.getElementById("preview"),t=e.contentDocument,n=t.createRange();n.selectNode(t.body);var o=e.contentWindow.getSelection();o.removeAllRanges(),o.addRange(n),t.execCommand("copy")}},{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(localStorage.getItem("WEEKLY"));this.setState({formData:t}),(x=window.CodeMirror.fromTextArea(document.querySelector(".textarea-section>textarea"),{lineNumbers:!0,mode:{name:"markdown",highlightFormatting:!0},lineWrapping:!0,tabSize:2})).on("change",(function(){e.updatePreview()})),x.setValue(this.mdConvert(t));var n=document.getElementById("preview").contentWindow.document,o=n.createElement("link");n.title="\u5468\u62a5HTML",o.href="https://dswwsd.github.io/markdown.css",o.type="text/css",o.rel="stylesheet",o.media="screen,print",n.getElementsByTagName("head")[0].appendChild(o),window.addEventListener("beforeunload",this.onUnload)}},{key:"onUnload",value:function(){localStorage.setItem("WEEKLY",JSON.stringify(this.state.formData))}}]),n}(o.Component),C=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function D(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}r.a.render(Object(f.jsx)(O,{}),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");C?function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):D(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):D(e)}))}}()}},[[475,1,2]]]);
//# sourceMappingURL=main.47786376.chunk.js.map