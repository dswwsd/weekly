{"version":3,"sources":["App.js","registerServiceWorker.js","index.js"],"names":["cleanArray","actual","newArray","i","length","push","isURL","str","test","md","MDIT","schema","uiSchema","summary","items","thoughts","plans","other","tasks","title","background","target","details","problems","progress","inline","codeMirror","App","props","onUnload","bind","state","formData","className","noValidate","this","onChange","setState","setValue","mdConvert","onSubmit","e","type","style","display","onClick","copyMD","fontSize","id","copyContent","frameBorder","data","dataArr","h3","ul","map","item","h4","status","wiki","prd","releaseDate","ol","json2md","document","getElementById","contentWindow","body","innerHTML","render","getValue","text","textArea","createElement","position","top","left","width","height","padding","border","outline","boxShadow","value","appendChild","select","msg","execCommand","console","log","err","removeChild","copyTextToClipboard","iframeElement","contentDoc","contentDocument","range","createRange","selectNode","selection","getSelection","removeAllRanges","addRange","_this","lsJSON","JSON","parse","localStorage","getItem","window","CodeMirror","fromTextArea","querySelector","lineNumbers","mode","name","highlightFormatting","lineWrapping","tabSize","on","updatePreview","doc","link","href","rel","media","getElementsByTagName","addEventListener","setItem","stringify","Component","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","catch","error","ReactDOM","URL","process","origin","fetch","response","headers","get","indexOf","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.47786376.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport Form from \"react-jsonschema-form\";\nimport json2md from 'json2md';\nimport MDIT from 'markdown-it';\n\n// utils\nfunction cleanArray(actual) {\n  if (!actual) {\n    return [];\n  }\n  let newArray = [];\n  for (let i = 0; i < actual.length; i++) {\n    if (actual[i]) {\n      newArray.push(actual[i]);\n    }\n  }\n  return newArray;\n}\nfunction isURL(str) {\n  return /^(https?):\\/\\/((?:[a-z0-9.-]|%[0-9A-F]{2}){3,})(?::(\\d+))?((?:\\/(?:[a-z0-9-._~!$&'()*+,;=:@]|%[0-9A-F]{2})*)*)(?:\\?((?:[a-z0-9-._~!$&'()*+,;=:\\/?@]|%[0-9A-F]{2})*))?(?:#((?:[a-z0-9-._~!$&'()*+,;=:\\/?@]|%[0-9A-F]{2})*))?$/i.test(str);\n}\n\nfunction copyTextToClipboard(text) {\n  let textArea = document.createElement(\"textarea\");\n  textArea.style.position = 'fixed';\n  textArea.style.top = 0;\n  textArea.style.left = 0;\n  textArea.style.width = '2em';\n  textArea.style.height = '2em';\n  textArea.style.padding = 0;\n  textArea.style.border = 'none';\n  textArea.style.outline = 'none';\n  textArea.style.boxShadow = 'none';\n  textArea.style.background = 'transparent';\n  textArea.value = text;\n  document.body.appendChild(textArea);\n  textArea.select();\n  try {\n    let successful = document.execCommand('copy');\n    let msg = successful ? 'successful' : 'unsuccessful';\n    console.log('Copying text command was ' + msg);\n  } catch (err) {\n    console.log('Oops, unable to copy');\n  }\n  document.body.removeChild(textArea);\n}\n// end utils\n\n// consts\nconst md = new MDIT();\n\nconst schema = {\n  \"type\": \"object\",\n  \"required\": [\n  ],\n  \"properties\": {\n    \"summary\": {\n      \"type\": \"array\",\n      \"title\": \"概述\",\n      \"items\": {\n        \"type\": \"string\",\n      }\n    },\n    \"thoughts\": {\n      \"type\": \"array\",\n      \"title\": \"本周感想\",\n      \"items\": {\n        \"type\": \"string\",\n      }\n    },\n    \"tasks\": {\n      \"type\": \"array\",\n      \"title\": \"项目详情\",\n      \"items\": {\n        \"type\": \"object\",\n        \"required\": [\n          \"title\"\n        ],\n        \"properties\": {\n          \"title\": {\n            \"type\": \"string\",\n            \"title\": \"标题\",\n          },\n          \"wiki\": {\n            \"type\": \"string\",\n            \"title\": \"项目文档\",\n            \"format\": \"uri\"\n          },\n          \"prd\": {\n            \"type\": \"string\",\n            \"title\": \"产品文档\",\n            \"format\": \"uri\"\n          },\n          \"releaseDate\": {\n            \"type\": \"string\",\n            \"title\": \"计划上线日期\",\n            \"format\": \"date\"\n          },\n          \"status\": {\n            \"title\": \"项目状态\",\n            \"type\": \"string\",\n            \"enum\": [\n              \"开发中\",\n              \"开发完成，待联调\",\n              \"联调中\",\n              \"已提测\",\n              \"测试中\",\n              \"已上线\",\n            ],\n            \"default\": \"开发中\",\n            \"uniqueItems\": true\n          },\n          \"progress\": {\n            \"title\": \"项目进度（%）\",\n            \"type\": \"integer\",\n            \"minimum\": 0,\n            \"maximum\": 100,\n            \"multipleOf\": 10,\n            \"default\": 0\n          },\n          \"background\": {\n            \"type\": \"array\",\n            \"title\": \"项目背景\",\n            \"items\": {\n              \"type\": \"string\",\n            }\n          },\n          \"target\": {\n            \"type\": \"array\",\n            \"title\": \"项目目标\",\n            \"items\": {\n              \"type\": \"string\",\n            }\n          },\n          \"details\": {\n            \"type\": \"array\",\n            \"title\": \"本周工作内容\",\n            \"items\": {\n              \"type\": \"string\",\n            }\n          },\n          \"problems\": {\n            \"type\": \"array\",\n            \"title\": \"问题与风险\",\n            \"items\": {\n              \"type\": \"string\",\n            }\n          }\n        }\n      }\n    },\n    \"other\": {\n      \"type\": \"array\",\n      \"title\": \"其他\",\n      \"items\": {\n        \"type\": \"string\",\n      }\n    },\n    \"plans\": {\n      \"type\": \"array\",\n      \"title\": \"下周计划\",\n      \"items\": {\n        \"type\": \"string\",\n      }\n    },\n  }\n};\n\nconst uiSchema = {\n  summary: {\n    items: {\n      \"ui:placeholder\": '概述',\n      // \"ui:widget\": \"textarea\"\n    }\n  },\n  thoughts: {\n    items: {\n      \"ui:placeholder\": '感想'\n    }\n  },\n  plans: {\n    items: {\n      \"ui:placeholder\": '下周计划'\n    }\n  },\n  other: {\n    items: {\n      \"ui:placeholder\": '其他'\n    }\n  },\n  tasks: {\n    items: {\n      title: {\n        'ui:placeholder': '项目标题'\n      },\n      background: {\n        items: {\n          'ui:placeholder': '项目背景'\n        }\n      },\n      target: {\n        items: {\n          'ui:placeholder': '项目目标'\n        }\n      },\n      details: {\n        items: {\n          'ui:placeholder': '本周工作内容'\n        }\n      },\n      problems: {\n        items: {\n          'ui:placeholder': '问题与风险'\n        }\n      },\n      progress: {\n        \"ui:widget\": \"range\",\n        \"ui:options\": {\n          inline: true\n        }\n      }\n    }\n  }\n};\n\nlet codeMirror = null;\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.onUnload = this.onUnload.bind(this);\n    this.state = {\n      formData: {\n        summary: [],\n        thoughts: [],\n        tasks: [],\n        other: [],\n        plans: []\n      }\n    }\n  }\n  render() {\n    return (\n      <div className=\"App col-md-12\">\n        <div className=\"col-md-5 form-section\">\n          <Form schema={schema}\n            uiSchema={uiSchema}\n            noValidate={true}\n            formData={this.state.formData}\n            onChange={({ formData }) => {\n              this.setState({ formData });\n              codeMirror.setValue(this.mdConvert(formData));\n            }}\n            onSubmit={(e) => false}>\n            <button type=\"submit\" style={{ display: 'none' }}>更新</button>\n          </Form>\n        </div>\n        <div className=\"col-md-7 fix-content\">\n          <div className=\"col-md-5 textarea-section\">\n            <legend>Markdown源码</legend>\n            <textarea></textarea>\n          </div>\n          <div className=\"col-md-7 preview-section\">\n            {/* <button className=\"col-md-3 btn btn-info btn-sm\" onClick={this.updatePreview}><span style={{ fontSize: 'normal' }}>更新预览</span></button> */}\n            <button className=\"col-md-3 btn btn-info btn-sm\" onClick={this.copyMD}><span style={{ fontSize: 'normal' }}>复制md</span></button>\n            <button id=\"cpBtn\" className=\"col-md-3 btn btn-info btn-sm\" onClick={this.copyContent}><span style={{ fontSize: 'normal' }}>复制html</span></button>\n            <iframe id=\"preview\" frameBorder=\"0\" title=\"预览\"></iframe>\n          </div>\n        </div>\n      </div>\n    );\n  }\n  mdConvert(data) {\n    let dataArr = [];\n    if (!data) {\n      return '';\n    }\n    if (data.summary) {\n      dataArr.push(\n        { h3: \"概述\" },\n        { ul: cleanArray(data.summary) },\n      );\n    }\n    if (data.thoughts) {\n      dataArr.push(\n        {\n          h3: \"感想\"\n        }, {\n          ul: cleanArray(data.thoughts)\n        }\n      );\n    }\n    let tasks = [];\n    if (data.tasks) {\n      data.tasks.map((item) => {\n        tasks.push(\n          {\n            h4: `${(item.title || '项目标题')} \\`${item.status}\\``\n          },\n          {\n            ul: cleanArray([\n              `项目文档: <${isURL(item.wiki) ? item.wiki : '无'}>`,\n              `产品文档: <${isURL(item.prd) ? item.prd : '无'}>`,\n              `${item.releaseDate ? '计划上线日期: ' + item.releaseDate : ''}`,\n              `${item.progress ? '项目整体进度: ' + item.progress + '%' : ''}`,\n              `${item.background && item.background.length ? '项目背景:' : ''}`,\n              {\n                ul: cleanArray(item.background)\n              },\n              `${item.target && item.target.length ? '项目目标:' : ''}`,\n              {\n                ul: cleanArray(item.target)\n              },\n              `${item.details && item.details.length ? '本周工作:' : ''}`,\n              {\n                ol: cleanArray(item.details)\n              },\n              `${item.problems && item.problems.length ? '问题与风险:' : ''}`,\n              {\n                ul: cleanArray(item.problems)\n              },\n            ])\n          }\n        );\n        return false;\n      });\n      dataArr.push(\n        { h3: \"项目详情\" }\n      );\n      dataArr.push(tasks);\n    }\n\n    if (data.other && data.other.length) {\n      dataArr.push(\n        { h3: \"其他问题\" },\n        { ul: cleanArray(data.other) },\n      );\n    }\n    if (data.plans && data.plans.length) {\n      dataArr.push(\n        { h3: \"下周计划\" },\n        { ul: cleanArray(data.plans) },\n      );\n    }\n    return json2md(dataArr);\n  }\n  updatePreview() {\n    document.getElementById('preview').contentWindow.document.body.innerHTML = md.render(codeMirror.getValue());\n  }\n  copyMD() {\n    copyTextToClipboard(codeMirror.getValue())\n  }\n  copyContent() {\n    let iframeElement = document.getElementById('preview');\n    let contentDoc = iframeElement.contentDocument;\n    let range = contentDoc.createRange();\n    range.selectNode(contentDoc.body);\n    let selection = iframeElement.contentWindow.getSelection();\n    selection.removeAllRanges();\n    selection.addRange(range);\n    contentDoc.execCommand('copy');\n  }\n  componentDidMount() {\n    let _this = this;\n    const lsJSON = JSON.parse(localStorage.getItem('WEEKLY'));\n    this.setState({\n      formData: lsJSON\n    });\n\n    codeMirror = window.CodeMirror.fromTextArea(document.querySelector('.textarea-section>textarea'), {\n      lineNumbers: true,\n      mode: {\n        name: \"markdown\",\n        highlightFormatting: true\n      },\n      lineWrapping: true,\n      tabSize: 2,\n      // theme: \"default\"\n    });\n    codeMirror.on('change', function(){\n      _this.updatePreview();\n    });\n    codeMirror.setValue(this.mdConvert(lsJSON));\n\n    //  \n    let frame = document.getElementById('preview');\n    let doc = frame.contentWindow.document;\n    let link = doc.createElement(\"link\");\n    doc.title = '周报HTML';\n    link.href = 'https://dswwsd.github.io/markdown.css';\n    link.type = \"text/css\";\n    link.rel = \"stylesheet\";\n    link.media = \"screen,print\";\n    doc.getElementsByTagName(\"head\")[0].appendChild(link);\n\n    // iOS pagehide\n    window.addEventListener(\"beforeunload\", this.onUnload);\n\n  }\n  onUnload() {\n    localStorage.setItem('WEEKLY', JSON.stringify(this.state.formData));\n  }\n}\n\nexport default App;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (!isLocalhost) {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      } else {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport registerServiceWorker from './registerServiceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\nregisterServiceWorker();\n"],"sourceRoot":""}